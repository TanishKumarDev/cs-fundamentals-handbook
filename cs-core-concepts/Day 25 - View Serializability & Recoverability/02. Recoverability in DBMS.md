# **Day 25 – Article 2: Recoverability in DBMS**

## **1. Overview**

**Recoverability** ensures that after a failure, the database can be restored to a **consistent state** by:

* Keeping **committed changes**
* Undoing **uncommitted changes**

It uses **transaction logs** to **redo** or **undo** actions, preventing data loss and maintaining integrity.

---

## **2. Levels of Logging / Recoverability**

1. **No-Undo Logging:**

   * Saves only **committed transactions**.
   * Cannot undo uncommitted changes.

2. **Undo Logging:**

   * Can **undo uncommitted transactions**.
   * May lose some **committed updates** in case of failure.

3. **Redo Logging:**

   * Can **redo committed transactions** to ensure durability.

4. **Undo-Redo Logging:**

   * Supports **both undo and redo**, ensuring full recovery and consistency.

> **Key:** Logging mechanism determines how well the DBMS can recover from failures.

---

## **3. Types of Schedules Based on Recoverability**

### **A. Recoverable Schedule**

* A transaction **Tj commits only after all transactions it depends on (Ti) commit**.
* Avoids inconsistency due to dirty reads.

**Example:**

| T1     | T2     |
| ------ | ------ |
| R(A)   |        |
| W(A)   |        |
|        | R(A)   |
| commit | commit |

* T2 reads data written by T1 → T2 commits **after T1**
* ✅ Recoverable

---

### **B. Irrecoverable Schedule**

* Occurs when a transaction **commits after reading uncommitted data** from another transaction, and the original transaction **later fails**.
* Leads to inconsistency; recovery is impossible.

**Key Rule:**

> A transaction must **not commit before transactions it depends on commit**.

---

### **C. Recoverable with Cascading Rollback**

* Transactions may **read uncommitted data**.
* If a transaction fails, **dependent transactions roll back** too.
* Database remains consistent as no committed transaction is affected.

**Rule:**

> Tj commits **only after Ti commits**

---

### **D. Cascadeless Recoverable Schedule**

* Transactions **read only committed data** from others.
* Eliminates cascading rollbacks.
* Simplifies recovery; avoids dirty reads.

**Rule:**

> Tj reads Ti’s data **only after Ti commits**

---

## **4. Key Capabilities for Recoverability**

1. **Atomicity:** Transactions are all-or-nothing.
2. **Durability:** Committed changes persist despite failures.
3. **Logging:** Transaction log records all changes for recovery.
4. **Checkpointing:** Saves DB state periodically to reduce recovery time.
5. **Recovery Manager:** Handles undo/redo using logs and checkpoints.
6. **Media Recovery:** Restores DB from backups and transaction logs after storage failure.

---

✅ **Summary Table: Recoverable Schedules**

| Schedule Type | Can Read Uncommitted? | Cascading Rollback? | Commit Order Requirement |
| ------------- | --------------------- | ------------------- | ------------------------ |
| Recoverable   | Yes                   | May                 | Tj after Ti              |
| Cascadeless   | No                    | No                  | Tj after Ti              |
| Irrecoverable | Yes                   | Yes                 | Violates Ti→Tj           |

