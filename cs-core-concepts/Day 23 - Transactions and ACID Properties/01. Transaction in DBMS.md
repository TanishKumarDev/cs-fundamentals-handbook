# **Day 23: Transactions and ACID Properties**

## **Article 1: Transaction in DBMS**


### **1. Introduction**

![](https://media.geeksforgeeks.org/wp-content/uploads/20250114175524058001/transaction_1.webp)

A **transaction** in DBMS is a sequence of one or more database operations (read, write, update, delete) executed as a single **logical unit of work**.
Either all operations succeed (**commit**) or none take effect (**rollback**).
Transactions ensure **data integrity, consistency, and reliability**, even in cases of **system failure or concurrent access**.

---

### **2. Key Concepts**


* A transaction changes the database from one **consistent state** to another.
* During execution, the database may temporarily become **inconsistent**, but consistency is restored after a successful commit.
* If a transaction only reads data, it’s called a **read-only transaction**.

**Example – Online Banking:**

* Read sender’s balance
* Deduct amount from sender
* Add amount to recipient
* Commit if all succeed; rollback otherwise

---

### **3. Operations in a Transaction**

#### **a) Read(X)**

Reads the value of element `X` and stores it in memory.

**Example:**

```sql
SELECT balance FROM accounts WHERE account_id = 'A123';
```

Used when retrieving data such as account balance.

---

#### **b) Write(X)**

Writes updated data back to the database after modification.

**Example:**

```sql
UPDATE accounts SET balance = balance - 100 WHERE account_id = 'A123';
```

Reflects the new balance after withdrawal.

---

#### **c) Commit**

Makes all changes **permanent**.
Once committed, the transaction cannot be undone.

**Example:**

```sql
COMMIT;
```

After a successful money transfer, this finalizes the transaction.

---

#### **d) Rollback**

Reverts all changes if an error occurs, restoring the database to the **last consistent state**.

**Example:**

```sql
ROLLBACK;
```

Used when a failure (e.g., insufficient funds) occurs during a transaction.

---

### **4. ACID Properties of a Transaction**

ACID ensures transactions are **reliable, consistent, and fault-tolerant**.

| Property        | Description                                                            | Example                                                           |
| --------------- | ---------------------------------------------------------------------- | ----------------------------------------------------------------- |
| **Atomicity**   | All or nothing — either the entire transaction succeeds or none of it. | Both debit and credit in money transfer must succeed.             |
| **Consistency** | Moves database from one valid state to another.                        | Balance after withdrawal must be accurate.                        |
| **Isolation**   | Each transaction executes independently of others.                     | Two users withdrawing from the same account should not interfere. |
| **Durability**  | Once committed, changes persist even after system failure.             | Updated balance remains after crash.                              |

---

### **5. Transaction Schedules**

When multiple transactions occur simultaneously, a **schedule** defines their order of execution.

#### **a) Serial Schedule**

* Transactions execute **one after another**.
* Ensures **consistency** but may cause **waiting** and low **throughput**.

#### **b) Non-Serial Schedule**

* Transactions execute **concurrently**, interleaving operations.
* Improves **efficiency**, but requires **concurrency control** to avoid inconsistencies.

---

### **6. Transaction Recovery Techniques**

Used to restore database consistency after failures (power loss, crashes, deadlocks, etc.).
Main goal — ensure **ACID** is maintained.

#### **a) Checkpointing**

* Saves a **snapshot** of the database state periodically.
* During recovery, the system rolls back to the last checkpoint instead of restarting completely.

#### **b) Undo and Redo Operations**

* **Undo:** Reverts uncommitted or incomplete transactions.
* **Redo:** Reapplies committed transactions not yet written to disk.

**Write-Ahead Logging (WAL):**
Log records are written to stable storage **before** applying changes to the database.

#### **c) Deferred Update (No-Undo/Redo)**

* Updates made in memory only.
* Written to database **after commit**.
* No need for undo; only redo if failure occurs.

#### **d) Immediate Update (Undo/Redo)**

* Updates written immediately to the database.
* Logs used for both undo and redo to maintain consistency.

#### **e) Shadow Paging**

* Keeps a **shadow copy** of the database.
* Operations occur on the copy.
* Upon commit, new version replaces the old one **atomically**.

---

### **7. Summary Table**

| Concept             | Purpose                                       | Key Benefit              |
| ------------------- | --------------------------------------------- | ------------------------ |
| Transaction         | Group of operations as one unit               | Maintains consistency    |
| Commit              | Save all changes                              | Ensures permanence       |
| Rollback            | Undo changes                                  | Prevents inconsistency   |
| ACID                | Atomicity, Consistency, Isolation, Durability | Reliability and safety   |
| Recovery Techniques | Restore database after failure                | Maintain ACID compliance |

---

### **8. Key Takeaway**

A well-designed transaction system ensures **accuracy, consistency, and recoverability** in all database operations.
Every database engine relies on **ACID principles** and **recovery mechanisms** to maintain trust and stability.
