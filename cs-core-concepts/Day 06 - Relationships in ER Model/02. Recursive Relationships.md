# Day 6 – Recursive Relationships in ER Model

## Article 2: Recursive Relationships

### **1. Overview**

A **recursive relationship** occurs when a relationship exists between instances of the **same entity set**. Each instance can play different roles in the relationship. Recursive relationships are commonly used to represent **hierarchies** or **networks** within the same entity type.

---

### **2. Key Concepts**

#### **Roles**

* Each instance of the entity plays a role in the relationship.
* Example: In an employee hierarchy:

  * **Supervisor** – employee who manages others
  * **Subordinate** – employee who is managed

#### **Degree**

* The degree of a recursive relationship is **1**, since only one entity set is involved.

---

### **3. Cardinality Constraints**

Cardinality defines how many instances of the entity can participate in the relationship.

**Supervisor Role:**

* Minimum: 0 (some employees, like subordinates, may manage no one)
* Maximum: N (a supervisor can manage many subordinates)

**Subordinate Role:**

* Minimum: 0 (CEO has no manager)
* Maximum: 1 (each subordinate has only one supervisor)

**Participation:**

* Neither role has total participation since the minimum cardinality is 0.
* Represented with **single lines** in ER diagrams.

---

### **4. Implementing Recursive Relationships in a Database**

A recursive relationship is implemented using a **foreign key** that references the **primary key of the same table**.

**Example Table Structure:**

```sql
CREATE TABLE employee (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    manager_id INT,
    FOREIGN KEY (manager_id) REFERENCES employee(id)
);
```

**Sample Data:**

| Emp_no | Emp_Fname | Emp_Lname | Emp_DOB    | Emp_NI_Number | Manager_no |
| ------ | --------- | --------- | ---------- | ------------- | ---------- |
| 1      | John      | Doe       | 1980-01-01 | 123456789     | NULL       |
| 2      | Jane      | Smith     | 1990-05-15 | 987654321     | 1          |
| 3      | Bob       | Johnson   | 1985-03-22 | 112233445     | 1          |

* `Manager_no` references the `Emp_no` of the supervisor.
* `NULL` indicates the top-level entity (e.g., CEO) with no supervisor.

---

### **5. Summary**

* Recursive relationships are **unary relationships** with roles assigned to each entity instance.
* Used to model **hierarchies**, **reporting structures**, and **networks**.
* Implemented in relational databases via **self-referencing foreign keys**.
* Cardinality constraints determine **minimum and maximum participation** for each role.
