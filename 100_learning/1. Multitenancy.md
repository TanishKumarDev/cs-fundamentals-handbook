# Day 1/100 - Multitenancy

[Multitenancy](https://www.tldraw.com/f/vSBHcDMKkhVVCzCmu5UQV?d=v-504.1024.1536.695.MkB9KCqVaZbUN5ohKBEru)

## Overview / Introduction
Multitenancy is a software architecture where a single instance of an application serves multiple customers, called tenants. Each tenant's data remains isolated and inaccessible to other tenants, even though they share the same infrastructure and application code.

## What, Why, How

### What is Multitenancy?
Multitenancy means one application serving multiple customers while keeping their data completely separate. It's analogous to an apartment building where residents share common infrastructure like elevators, water pipes, and electricity, but each has their own private living space.

### Why Multitenancy Matters
- **Resource Efficiency**: Shared infrastructure maximizes resource utilization
- **Cost Reduction**: Lower costs compared to dedicated infrastructure per customer
- **Scalability**: Easier to scale and maintain than multiple separate deployments
- **Business Model**: Enables SaaS (Software-as-a-Service) offerings

### How Multitenancy Works
Multitenancy operates through shared computing resources where multiple cloud customers use the same physical servers while maintaining complete data separation. The cloud vendor manages the infrastructure, and tenants remain unaware of each other.

## Core Concepts

### Tenant Identification
Each tenant is identified through:
- **Tenant ID**: A unique identifier that links all tenant data
- **Workspace/Organization**: Common terms used in applications to represent tenants

### Data Isolation Approaches
1. **Separate Database per Tenant**
   - Each tenant gets their own dedicated database
   - Complete physical separation of data
   - Higher security but more complex scaling

2. **Shared Database with Tenant ID**
   - Single database with tenant_id column in tables
   - Logical separation at row level
   - Easier scaling but requires careful query design

## Examples / Use-Cases

### Real-World Applications
- **Shopify**: E-commerce platform serving multiple businesses
- **Notion**: Workspace-based collaboration tool
- **GitHub Organizations**: Multiple teams using same platform
- **Banking Analogy**: Multiple customers storing money in one bank with separate accounts

### Cloud Computing Context
- **IaaS/PaaS/SaaS**: All utilize multitenant architecture
- **Containers**: Multiple containers from different customers run on same host
- **Serverless Computing**: Functions from different customers execute on shared infrastructure

## Observations

### Implementation Considerations
- **Query Design**: Must always filter by tenant_id to prevent data leakage
- **Resource Allocation**: Balance between isolation and resource utilization
- **Security**: Proper configuration prevents cross-tenant data access

### Tenant Experience
- Each tenant interacts with the application as if it's exclusively theirs
- Customization and configuration are tenant-specific
- Performance and data remain isolated

## Advantages / Disadvantages

### Advantages
- **Cost Effective**: Shared resources reduce overall costs
- **Efficient Scaling**: Easier to scale single application than multiple instances
- **Simplified Maintenance**: Single codebase to update and maintain
- **Better Resource Utilization**: Prevents under-utilization of dedicated resources

### Disadvantages
- **Security Risks**: Potential for data leakage if not properly implemented
- **Noisy Neighbor**: One tenant's heavy usage can impact others
- **Compliance Challenges**: Some regulations may prohibit shared infrastructure
- **Implementation Complexity**: Requires careful design to ensure proper isolation

## Key Takeaways

### Fundamental Principles
1. One application instance serves multiple customers
2. Data isolation is mandatory between tenants
3. Shared infrastructure enables cost efficiency
4. Proper tenant identification is crucial for security

### Implementation Choices
- Choose between separate databases or shared database with tenant_id
- Consider trade-offs between security and scalability
- Always include tenant context in data queries

### Cloud Context
- Multitenancy is fundamental to cloud computing economics
- Enables practical and affordable cloud services
- Works across IaaS, PaaS, SaaS, containers, and serverless computing

## Interview Insights
- Understand both implementation approaches and their trade-offs
- Be prepared to discuss data isolation strategies
- Know how to prevent data leakage in shared database approach
- Understand the business case for multitenancy vs single-tenancy

## Summary
Multitenancy is a foundational architecture pattern where a single application instance serves multiple isolated customers. It enables efficient resource utilization, cost reduction, and scalable SaaS business models. The core challenge is maintaining data isolation, which can be achieved through either separate databases per tenant or a shared database with tenant identification. This architecture is essential to modern cloud computing and SaaS applications.

## References

- [What is Multitenancy?](https://www.cloudflare.com/en-gb/learning/cloud/what-is-multitenancy/)
