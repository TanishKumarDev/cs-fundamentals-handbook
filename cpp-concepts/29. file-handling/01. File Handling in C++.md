
# **File Handling in C++ (Through Classes)**

### **1. What is File Handling?**

* Programs run in **RAM**, which is **volatile**. Data exists only while the program runs.
* **File Handling** allows storing and retrieving data permanently from **secondary memory** (HDD, SSD).
* In C++, file handling uses **streams** just like `cin` and `cout`.

---

### **2. File Stream Classes**

Defined in `<fstream>`:

| Class      | Purpose        | Default Mode |
| ---------- | -------------- | ------------ |
| `fstream`  | Read & Write   | Needs mode   |
| `ifstream` | Input (Read)   | `ios::in`    |
| `ofstream` | Output (Write) | `ios::out`   |

---

### **3. File Opening Modes**

| Mode          | Meaning                |
| ------------- | ---------------------- |
| `ios::in`     | Read from file         |
| `ios::out`    | Write to file          |
| `ios::binary` | Binary mode            |
| `ios::app`    | Append at end          |
| `ios::ate`    | Start at end of file   |
| `ios::trunc`  | Clear existing content |

**Example:**

```cpp
#include <fstream>
using namespace std;

fstream file("data.txt", ios::in | ios::out); // Read & Write
ofstream fileOut("data.txt");                 // Write
ifstream fileIn("data.txt");                  // Read
```

---

### **4. Writing to a File**

```cpp
#include <iostream>
#include <fstream>
using namespace std;

int main() {
    ofstream file("example.txt");
    file << "Hello, C++ File Handling!";
    file.close();
    return 0;
}
```

---

### **5. Reading from a File**

**Basic read (stops at whitespace):**

```cpp
ifstream file("example.txt");
string s;
file >> s;
cout << s;
file.close();
```

**Read full line using `getline`:**

```cpp
ifstream file("example.txt");
string s;
getline(file, s);
cout << s;
file.close();
```

---

### **6. Closing a File**

* Always close a file to **free resources**:

```cpp
file.close();
```

---

### **7. Handling File Errors**

**Check if file opened successfully:**

```cpp
ifstream file("nonexistent.txt");
if (!file.is_open()) {
    cerr << "Error: Unable to open file!" << endl;
}
```

**Check read/write operation success:**

```cpp
string line;
if (!getline(file, line)) {
    cerr << "Error: Failed to read data" << endl;
}
```

**Check End-of-File (EOF):**

```cpp
while (getline(file, line))
    cout << line << endl;
if (file.eof())
    cout << "Reached end of file." << endl;
```

---

### **8. Binary File Handling**

**Write to binary file:**

```cpp
ofstream file("file.bin", ios::binary);
string str = "Hello Binary";
size_t len = str.length();
file.write(reinterpret_cast<const char*>(&len), sizeof(len));
file.write(str.c_str(), len);
file.close();
```

**Read from binary file:**

```cpp
ifstream file("file.bin", ios::binary);
size_t len;
file.read(reinterpret_cast<char*>(&len), sizeof(len));
char* buffer = new char[len + 1];
file.read(buffer, len);
buffer[len] = '\0';
cout << buffer;
delete[] buffer;
file.close();
```

---

### **9. Other File Operations**

* **Delete a File**: `remove("filename.txt");`
* **Append to File**: Open in `ios::app` mode
* **Copy File**: Read from one, write to another
* **Modify Binary File**: Use `seekp()` / `seekg()` with binary streams

---

### **Key Notes**

1. **Always check file open and read/write status.**
2. **Close files after use** to prevent memory leaks.
3. Binary files store raw data; text files store human-readable data.
4. Use `ios::binary` when handling non-text data.