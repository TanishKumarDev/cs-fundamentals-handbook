# **How to Create a Thread in C++**

A **thread** is the **smallest independent unit of execution** that the CPU can schedule. Multithreading allows multiple threads to run concurrently, improving performance and responsiveness.

---

## **1. Thread Creation in C++**

In C++, **`std::thread`** is the class template used to create and manage threads. When creating a thread, we need to provide **instructions for execution**, which can be passed as:

1. **Function Pointer**
2. **Functor (Function Object)**
3. **Lambda Expression**

---

## **2. Creating a Thread Using Function Pointer**

```cpp
#include <iostream>
#include <thread>
using namespace std;

// Function to be executed by the new thread
void myFunction() {
    cout << "Hello from the new thread!" << endl;
}

int main() {
    // Create a new thread that calls myFunction
    thread newThread(myFunction);

    // Wait for the new thread to finish
    newThread.join();

    cout << "Hello from the main thread!" << endl;
    return 0;
}
```

**Output:**

```
Hello from the new thread!
Hello from the main thread!
```

**Explanation:**

* `thread newThread(myFunction);` → Creates a thread executing `myFunction`.
* `newThread.join();` → Main thread waits for `newThread` to finish.
* Ensures proper sequence and avoids premature termination of the program.

---

## **3. Creating a Thread Using Lambda Expression**

```cpp
#include <iostream>
#include <thread>
using namespace std;

int main() {
    // Create a thread using lambda
    thread newThread([] {
        cout << "Hello from the new thread!" << endl;
    });

    // Wait for the new thread to finish
    newThread.join();

    cout << "Hello from the main thread!" << endl;
    return 0;
}
```

**Output:**

```
Hello from the new thread!
Hello from the main thread!
```

**Explanation:**

* Lambda expressions allow **inline thread definitions** without a separate function.
* Useful for short tasks or capturing variables from the enclosing scope.

---

## **4. Important Notes**

1. Always call **`join()`** or **`detach()`** on threads to avoid **std::terminate()**.

   * `join()` → Waits for thread to finish.
   * `detach()` → Lets thread run independently.
2. Threads are **non-copyable**. Use `std::move()` if transferring ownership.
3. Multiple threads can be created in **loops** or **functions**, but shared resources must be synchronized (using mutex, condition_variable, etc.).

---

## **5. Thinking Approach**

* **Question:** Why create threads?

  * To execute tasks concurrently, e.g., computations, I/O, UI responsiveness.
* **Question:** When to use lambda over function pointer?

  * For quick tasks, inline logic, or capturing local variables.
* **Question:** What happens if we forget `join()`?

  * Program terminates unexpectedly (runtime error).

---

✅ **Summary Table**

| Method       | Usage                     | Notes                     |
| ------------ | ------------------------- | ------------------------- |
| Function Ptr | `thread t(func)`          | Separate function needed  |
| Lambda       | `thread t([]{ ... })`     | Inline, can capture scope |
| Functor      | `thread t(FunctorObject)` | Custom callable object    |

