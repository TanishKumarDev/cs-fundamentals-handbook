# **Constructors and Destructors in C++**

---

## **1. What is a Constructor?**

A **constructor** is a **special member function** of a class that is **automatically called** when an **object is created**.

### **Purpose**

It is mainly used to:

* **Initialize** data members.
* **Allocate resources** if needed.
* **Set up an object** into a valid usable state.

---

## **2. Syntax**

```cpp
class ClassName {
public:
    ClassName() {    // constructor
        // initialization code
    }
};
```

### Key points:

* Name **must be same as class name**.
* **No return type** (not even void).
* Called **automatically** when object is created.

---

## **3. Types of Constructors**

There are **3 major types**:

### **(1) Default Constructor**

Automatically called when an object is created **without arguments**.

Example:

```cpp
#include <iostream>
using namespace std;

class Student {
public:
    string name;
    int age;

    // Default Constructor
    Student() {
        name = "Unknown";
        age = 0;
        cout << "Default constructor called" << endl;
    }

    void display() {
        cout << "Name: " << name << ", Age: " << age << endl;
    }
};

int main() {
    Student s;    // calls default constructor
    s.display();
}
```

**Output:**

```
Default constructor called
Name: Unknown, Age: 0
```

---

### **(2) Parameterized Constructor**

Takes parameters to initialize the object with custom values.

Example:

```cpp
class Student {
public:
    string name;
    int age;

    // Parameterized Constructor
    Student(string n, int a) {
        name = n;
        age = a;
        cout << "Parameterized constructor called" << endl;
    }

    void display() {
        cout << "Name: " << name << ", Age: " << age << endl;
    }
};

int main() {
    Student s1("Tanish", 21);
    s1.display();
}
```

**Output:**

```
Parameterized constructor called
Name: Tanish, Age: 21
```

---

### **(3) Copy Constructor**

Creates a new object as a **copy of an existing object**.

Example:

```cpp
class Student {
public:
    string name;
    int age;

    Student(string n, int a) {
        name = n;
        age = a;
    }

    // Copy Constructor
    Student(const Student &obj) {
        name = obj.name;
        age = obj.age;
        cout << "Copy constructor called" << endl;
    }

    void display() {
        cout << name << " - " << age << endl;
    }
};

int main() {
    Student s1("Tanish", 21);
    Student s2 = s1;  // copy constructor called
    s2.display();
}
```

**Output:**

```
Copy constructor called
Tanish - 21
```

---

## **4. Constructor Overloading**

You can define **multiple constructors** in the same class with **different parameters**.

Example:

```cpp
class Box {
public:
    int length, width;

    Box() {  // default
        length = 0; width = 0;
    }

    Box(int l) {  // single parameter
        length = width = l;
    }

    Box(int l, int w) {  // two parameters
        length = l; width = w;
    }

    void area() {
        cout << "Area: " << length * width << endl;
    }
};

int main() {
    Box b1;       // calls default
    Box b2(5);    // calls 1-parameter
    Box b3(4, 6); // calls 2-parameter

    b1.area();
    b2.area();
    b3.area();
}
```

**Output:**

```
Area: 0
Area: 25
Area: 24
```

---

## **5. Constructor with Initialization List**

Used when you want to **initialize data members directly** (especially constants or references).

Example:

```cpp
class Point {
private:
    int x, y;

public:
    // using initialization list
    Point(int a, int b) : x(a), y(b) {
        cout << "Values initialized using initialization list" << endl;
    }

    void display() {
        cout << "x = " << x << ", y = " << y << endl;
    }
};

int main() {
    Point p(3, 4);
    p.display();
}
```

**Output:**

```
Values initialized using initialization list
x = 3, y = 4
```

---

## **6. What is a Destructor?**

A **destructor** is a special member function that is **automatically called when an object goes out of scope** or is **explicitly deleted**.

### **Purpose**

* To **free memory or resources** allocated to the object.
* Clean-up tasks before the object is destroyed.

---

## **7. Syntax**

```cpp
class ClassName {
public:
    ~ClassName() {
        // cleanup code
    }
};
```

### Key points:

* Name same as class name, but starts with **`~` (tilde)**.
* **No return type and no parameters.**
* **Automatically called** in reverse order of construction.

---

## **8. Example**

```cpp
#include <iostream>
using namespace std;

class Demo {
public:
    Demo() {
        cout << "Constructor called" << endl;
    }

    ~Demo() {
        cout << "Destructor called" << endl;
    }
};

int main() {
    Demo d1;  // constructor runs
    cout << "Inside main function" << endl;
}  // destructor runs automatically here
```

**Output:**

```
Constructor called
Inside main function
Destructor called
```

---

## **9. Constructor & Destructor Call Order**

### Example:

```cpp
class A {
public:
    A() { cout << "A constructor\n"; }
    ~A() { cout << "A destructor\n"; }
};

class B {
public:
    B() { cout << "B constructor\n"; }
    ~B() { cout << "B destructor\n"; }
};

int main() {
    A objA;
    B objB;
}
```

**Output:**

```
A constructor
B constructor
B destructor
A destructor
```

**Rule:**
Constructors are called **in order of creation**,
Destructors are called **in reverse order**.

---

## **10. When Constructors/Destructors Are Called**

| Event                    | Constructor | Destructor             |
| ------------------------ | ----------- | ---------------------- |
| Object created           | Called      | —                      |
| Object destroyed         | —           | Called                 |
| Program ends             | —           | All destructors called |
| Object goes out of scope | —           | Called automatically   |

---

## **11. Default Copy Constructor and Destructor**

* If you **don’t define** them, C++ automatically generates:

  * A **default constructor** (no arguments)
  * A **default destructor**
  * A **default copy constructor**

But when you allocate **dynamic memory**, you must **define your own** to prevent shallow copy problems.

---

## **12. Shallow Copy vs Deep Copy (Important for Interviews)**

### Shallow Copy:

Copies **only addresses**, not actual content.

### Deep Copy:

Copies **data** separately — safe and independent.

Example:

```cpp
class Sample {
    int* ptr;
public:
    Sample(int val) {
        ptr = new int(val);
    }

    // Deep Copy Constructor
    Sample(const Sample &obj) {
        ptr = new int(*obj.ptr);
    }

    ~Sample() {
        delete ptr;
    }

    void show() {
        cout << "Value: " << *ptr << endl;
    }
};
```

---

## **13. Summary Table**

| Feature     | Constructor        | Destructor             |
| ----------- | ------------------ | ---------------------- |
| Purpose     | Initialize object  | Destroy object         |
| Name        | Same as class      | Same as class with `~` |
| Parameters  | Yes (can overload) | No                     |
| Overloading | Allowed            | Not allowed            |
| Return Type | None               | None                   |
| Call Timing | On object creation | On object deletion     |

---

## **14. Practical Example**

```cpp
#include <iostream>
using namespace std;

class Student {
public:
    string name;
    int age;

    Student(string n, int a) { // Constructor
        name = n;
        age = a;
        cout << "Constructor called for " << name << endl;
    }

    ~Student() { // Destructor
        cout << "Destructor called for " << name << endl;
    }

    void display() {
        cout << "Name: " << name << ", Age: " << age << endl;
    }
};

int main() {
    Student s1("Tanish", 21);
    s1.display();

    Student s2("Rohit", 20);
    s2.display();

    cout << "End of main function" << endl;
}
```

**Output:**

```
Constructor called for Tanish
Name: Tanish, Age: 21
Constructor called for Rohit
Name: Rohit, Age: 20
End of main function
Destructor called for Rohit
Destructor called for Tanish
```

---

## **15. Key Takeaways**

* **Constructor**: Automatically runs to initialize.
* **Destructor**: Automatically runs to clean up.
* **Copy Constructor**: Makes a new object from existing one.
* **Initialization List**: Preferred for better efficiency.
* **Order**: Constructors (top-down), Destructors (bottom-up).
* **Deep Copy** prevents unwanted pointer sharing.
