# Destructors in C++

## Definition

* A **destructor** is an instance member function that is automatically invoked **when an object is destroyed**.
* It is the **last function called** before an object goes out of scope or is deleted.

---

## Syntax

```cpp
~className() {
    // Body of destructor
}
```

* Denoted by **tilde (~)** followed by class name.
* Can be **declared inside** the class and defined **outside** if needed:

```cpp
class className {
public:
    ~className();
};

className::~className() {
    // Destructor body
}
```

---

## Examples

### **Example 1: Basic Destructor**

```cpp
#include <iostream>
using namespace std;

class Test {
public:
    Test() {
        cout << "Constructor Called" << endl;
    }
    ~Test() {
        cout << "Destructor Called" << endl;
    }
};

int main() {
    Test t;
    return 0;
}
```

**Output:**

```
Constructor Called
Destructor Called
```

---

### **Example 2: Multiple Objects**

```cpp
#include <iostream>
using namespace std;

int Count = 0;
class Test {
public:
    Test() {
        Count++;
        cout << "No. of Objects created: " << Count << endl;
    }
    ~Test() {
        cout << "No. of Objects destroyed: " << Count << endl;
        Count--;
    }
};

int main() {
    Test t, t1, t2, t3;
    return 0;
}
```

**Output:**

```
No. of Objects created: 1
No. of Objects created: 2
No. of Objects created: 3
No. of Objects created: 4
No. of Objects destroyed: 4
No. of Objects destroyed: 3
No. of Objects destroyed: 2
No. of Objects destroyed: 1
```

> Objects are destroyed in **reverse order of creation**.

---

### **Example 3: Destructor for Dynamic Memory**

```cpp
#include <iostream>
using namespace std;

class MyClass {
private:
    int* data;

public:
    MyClass(int value) {
        data = new int;
        *data = value;
        cout << *data << endl;
    }

    ~MyClass() {
        delete data;  // Release memory
        cout << "Destructor: Memory deallocated" << endl;
    }
};

int main() {
    MyClass obj1(10);
    return 0;
}
```

**Output:**

```
10
Destructor: Memory deallocated
```

> Custom destructor prevents **memory leaks** when dynamic memory is used.

---

## Characteristics of Destructors

1. Name is **same as class** with `~` symbol.
2. Only **one destructor** per class; cannot be overloaded.
3. Cannot be **static** or **const**.
4. Takes **no arguments** and **returns nothing**.
5. Automatically called when object **goes out of scope**.
6. Objects destroyed in **reverse order** of creation.

---

## When is Destructor Called?

1. Function ends (local object goes out of scope).
2. Program ends (global/static objects).
3. Block containing local variables ends.
4. `delete` operator is called on dynamically allocated objects.

---

## Explicit Destructor Call

```cpp
object_name.~class_name();
```

> Rarely used; normally handled automatically by the compiler.

---