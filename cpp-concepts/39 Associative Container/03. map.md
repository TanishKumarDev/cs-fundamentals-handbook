# Map in C++ STL

A **map** is an **associative container** that stores **key-value pairs** in a **sorted order**.

* Implemented as a **Self-Balancing Binary Search Tree (Red-Black Tree)**.
* Keys are **unique**; duplicate keys are not allowed.
* Operations like **search, insert, delete** are `O(log n)`.
* Keys are stored in **ascending order by default**.
* Supports additional functions like `upper_bound()` and `lower_bound()`.

---

## Syntax

```cpp
#include <map>
map<key_type, value_type> m;
```

Where:

* `key_type` → type of key
* `value_type` → type of value
* `m` → name of the map

---

## 1. Creating and Traversing a Map

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    // Empty map
    map<int, string> m1;

    // Initialize map
    map<int, string> m2 = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    // Traversing
    for (auto &p : m2)
        cout << p.first << " " << p.second << endl;

    return 0;
}
```

**Output:**

```
1 Geeks
2 For
3 Geeks
```

---

## 2. Inserting Elements

* Use `insert()` → only adds if key doesn’t exist.
* **Time Complexity:** `O(log n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{2, "For"}, {3, "Geeks"}};

    m.insert({1, "Geeks"});  // Inserts only if key 1 does not exist

    for (auto x : m)
        cout << x.first << " " << x.second << endl;

    return 0;
}
```

**Output:**

```
1 Geeks
2 For
3 Geeks
```

---

## 3. Accessing Elements

* Use `[]` operator → returns value for a key; inserts default value if key not present.
* Use `at()` → returns value for a key; throws error if key not present.
* Use `find()` → returns iterator if key exists, otherwise `end()`.
* **Time Complexity:** `O(log n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    cout << m[1] << endl;     // Access using []
    cout << m.at(2) << endl;  // Access using at()

    return 0;
}
```

**Output:**

```
Geeks
For
```

---

## 4. Updating Elements

* Assign new value to an existing key: `map[key] = newValue;`
* **Time Complexity:** `O(log n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    m[0] = "Tweaks";      // Insert new key
    m.at(1) = "By";       // Update existing key

    cout << m[0] << endl;
    cout << m.at(1) << endl;

    return 0;
}
```

**Output:**

```
Tweaks
By
```

---

## 5. Finding Elements

* Use `find(key)` → returns iterator if key exists, else `end()`.
* **Time Complexity:** `O(log n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    auto it = m.find(2);

    if (it != m.end())
        cout << it->first << " " << it->second;
    else
        cout << "Key not Found!";

    return 0;
}
```

**Output:**

```
2 For
```

---

## 6. Traversing a Map

* Use iterators or range-based for loops.
* Traversal happens **in ascending order of keys**.
* **Time Complexity:** `O(n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    for (auto it = m.begin(); it != m.end(); ++it)
        cout << it->first << " " << it->second << endl;

    return 0;
}
```

**Output:**

```
1 Geeks
2 For
3 Geeks
```

---

## 7. Deleting Elements

* `erase(key)` → deletes the key-value pair.
* `erase(iterator)` → deletes element pointed by iterator.
* **Time Complexity:** `O(log n)`

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    m.erase(2);        // Delete by key
    m.erase(m.begin()); // Delete first element by iterator

    for (auto i : m)
        cout << i.first << " " << i.second << endl;

    return 0;
}
```

**Output:**

```
3 Geeks
```

---

## Summary of Key Operations

| Operation | Function        | Description                             | Complexity |
| --------- | --------------- | --------------------------------------- | ---------- |
| Insert    | `insert()`      | Add key-value pair if key doesn't exist | O(log n)   |
| Access    | `[]` / `at()`   | Access or update value by key           | O(log n)   |
| Find      | `find()`        | Check existence of key                  | O(log n)   |
| Delete    | `erase()`       | Remove by key or iterator               | O(log n)   |
| Traverse  | iterators/range | Visit all key-value pairs               | O(n)       |

---

## Complete Example

```cpp
#include <iostream>
#include <map>
using namespace std;

int main() {
    map<int, string> m = {{1, "Geeks"}, {2, "For"}, {3, "Geeks"}};

    // Insert and update
    m[0] = "Tweaks"; 
    m[3] = "Updated";

    // Find element
    auto it = m.find(2);
    if(it != m.end())
        cout << it->first << " " << it->second << endl;

    // Traverse map
    cout << "All key-value pairs:" << endl;
    for(auto &p : m)
        cout << p.first << " " << p.second << endl;

    // Delete elements
    m.erase(0);
    m.erase(m.begin());

    cout << "After deletion:" << endl;
    for(auto &p : m)
        cout << p.first << " " << p.second << endl;

    return 0;
}
```

**Output:**

```
2 For
All key-value pairs:
0 Tweaks
1 Geeks
2 For
3 Updated
After deletion:
2 For
3 Updated
```

---