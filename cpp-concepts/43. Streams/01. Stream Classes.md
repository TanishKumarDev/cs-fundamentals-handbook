# **C++ Stream Classes**

C++ **streams** are objects used for handling **input and output (I/O) operations**. They abstract the details of reading/writing data from various sources (keyboard, files, strings, etc.) and provide a **uniform interface**.

Think of a stream as a **conveyor belt**:

* Data moves **from a source to the program** (input stream)
* Data moves **from the program to a destination** (output stream)

---

## **1. Stream Class Hierarchy**

At the top is the **`ios` class**, which provides **common features**:

* Formatting (width, precision, etc.)
* Error state management (goodbit, failbit, eofbit)

Derived classes:

| Class       | Purpose                                            |
| ----------- | -------------------------------------------------- |
| `istream`   | Input operations (read data)                       |
| `ostream`   | Output operations (write data)                     |
| `iostream`  | Both input and output (inherits istream & ostream) |
| `streambuf` | Low-level buffer management                        |

**Hierarchy Overview:**

```
ios
 ├── istream
 ├── ostream
 └── iostream (inherits istream + ostream)
```

---

## **2. Key Stream Classes**

### **a) `istream`**

Used for **input operations**:

* `get()`: Read a single character
* `getline()`: Read a line of text
* `read()`: Read binary data
* `ignore()`: Skip characters
* `putback()`: Put a character back into the input stream

**Example: Reading a character**

```cpp
#include <iostream>
using namespace std;

int main() {
    char x;
    cin.get(x);  // Read single character
    cout << x;
}
```

**Input:** `g`
**Output:** `g`

---

### **b) `ostream`**

Used for **output operations**:

* `put()`: Write a single character
* `write()`: Write multiple characters

**Example: Writing a character**

```cpp
#include <iostream>
using namespace std;

int main() {
    char x;
    cin.get(x);
    cout.put(x);  // Write single character
}
```

**Input:** `g`
**Output:** `g`

---

### **c) `iostream`**

* Inherits **both `istream` and `ostream`**
* Can handle **input and output simultaneously**

**Example: Writing multiple characters**

```cpp
#include <iostream>
using namespace std;

int main() {
    cout.write("geeksforgeeks", 5); // write first 5 chars
}
```

**Output:** `geeks`

---

## **3. `_withassign` Variants**

These classes support **assignment of streams at runtime**, enabling flexibility in using streams.

### **a) `istream_withassign`**

* Allows reassigning `cin` to another input stream

```cpp
#include <iostream>
using namespace std;

class Demo {
public:
    int dx, dy;

    friend void operator>>(Demo& d, istream& mycin) {
        mycin >> d.dx >> d.dy;
    }
};

int main() {
    Demo d;
    d >> cin;  // assign cin for input
    cout << "dx = " << d.dx << ", dy = " << d.dy;
}
```

**Input:** `4 5`
**Output:** `dx = 4, dy = 5`

---

### **b) `ostream_withassign`**

* Allows reassigning `cout`, `cerr`, `clog` to another output stream

```cpp
#include <iostream>
using namespace std;

class Demo {
public:
    int dx = 4, dy = 5;

    friend void operator<<(Demo& d, ostream& mycout) {
        mycout << "dx = " << d.dx << ", dy = " << d.dy;
    }
};

int main() {
    Demo d;
    d << cout;  // assign cout for output
}
```

**Output:** `dx = 4, dy = 5`

---

## **4. Summary**

| Stream Class         | Role                              | Examples / Methods                 |
| -------------------- | --------------------------------- | ---------------------------------- |
| `ios`                | Base class for formatting & flags | `width()`, `precision()`, `good()` |
| `istream`            | Input operations                  | `cin.get()`, `getline()`, `read()` |
| `ostream`            | Output operations                 | `cout.put()`, `write()`            |
| `iostream`           | Both input and output             | Combination of istream + ostream   |
| `istream_withassign` | Input with reassignable stream    | `cin >> obj`                       |
| `ostream_withassign` | Output with reassignable stream   | `obj << cout`                      |
| `streambuf`          | Low-level buffer handling         | Used internally by streams         |

**Key Points:**

* Streams **abstract I/O**, making code cleaner and portable.
* `_withassign` variants allow **dynamic reassignment** of streams.
* `iostream` is the most commonly used class for standard I/O.

---